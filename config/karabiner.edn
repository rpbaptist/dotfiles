;; !  | means mandatory
;; #  | means optional
;; C  | left_command
;; T  | left_control
;; O  | left_option
;; S  | left_shift
;; F  | fn
;; Q  | right_command
;; W  | right_control
;; E  | right_option
;; R  | right_shift
;; P  | caps_lock
;; !! | mandatory command + control + optional + shift (hyper)
;; ## | optional any

{
  :applications {:general ["^com\\.google\\.Chrome$"
                           "^com\\.tinyspeck\\.slackmacgap$"]
                 :browser ["^com\\.google\\.Chrome$"]
                 :slack ["^com\\.tinyspeck\\.slackmacgap$"]
                 :editor ["^com\\.sublimetext\\.4$"]
                 :term ["^net\\.kovidgoyal\\.kitty$"]}
  :templates {:yabai_window "/usr/local/bin/yabai -m window %s"
              :yabai_space "/usr/local/bin/yabai -m space %s"
              :yabai_display "/usr/local/bin/yabai -m display %s"}
  :main [{:des "Yabai commands"
          :rules [[:!Qn [:yabai_window "--focus west"]]
                  [:!Qe [:yabai_window "--focus south"]]
                  [:!Qi [:yabai_window "--focus east"]]
                  [:!Qu [:yabai_window "--focus north"]]

                  [:!QSn [:yabai_window "--warp west"]]
                  [:!QSe [:yabai_window "--warp south"]]
                  [:!QSi [:yabai_window "--warp east"]]
                  [:!QSu [:yabai_window "--warp north"]]

                  [:!Qd [:yabai_window "--toggle float"]]

                  [:!QSb [:yabai_space "--balance"]]
                  [:!Qr [:yabai_space "--rotate 90"]]
                  [:!QSr [:yabai_space "--rotate 270"]]

                  [:!QSx [:yabai_space "--mirror x-axis"]]
                  [:!QSy [:yabai_space "--mirror y-axis"]]

                  [:!Q1 [:yabai_display "--focus 1"]]
                  [:!Q2 [:yabai_display "--focus 2"]]

                  [:!QOc [[:yabai_space "--create"] [:yabai_space "--focus next"]]]
                  [:!QOx [:yabai_space "--destroy"]]

                  [:!QOn [:yabai_window "--space prev"]]
                  [:!QOi [:yabai_window "--space next"]]

                  [:!QOopen_bracket [:yabai_space "--focus prev"]]
                  [:!QOclose_bracket [:yabai_space "--focus next"]]

                  [:!Qf [:yabai_window "--toggle zoom-fullscreen"]]]}
         {:des "Home and End keys outside terminal"
          :rules [[:#SRhome :!Cleft_arrow :!term]
                  [:#SRend :!Cright_arrow :!term]]}
         {:des "Ctrl plus arrow"
          :rules [[:!Tleft_arrow :!Oleft_arrow]
                  [:!Tright_arrow :!Oright_arrow]]}
         {:des "Home and End keys in terminal"
          :rules [[:home :!Ta :term]
                  [:end :!Te :term]]}
         {:des "Delete forward in terminal"
          :rules [[:!Rdelete_forward :delete_forward]
                  [:!Sdelete_forward :delete_forward]]}
         {:des "Find"
          :rules [[:!Tf :!Cf]
                  [:!Wf :!Cf]]}
         {:des "Select URL in browser"
          :rules [[:!Tl :!Cl :browser]
                  [:!Wl :!Cl :browser]
                  [{:pkey :button1 :modi :left_control} {:pkey :button1 :modi :left_command} :browser]]}
         {:des "Copy, paste, cut, undo, redo, select"
          :rules [[:!Tx :!Cx :!term]
                  [:!Ta :!Ca :!term]
                  [:!Tc :!Cc :!term]
                  [:!T#SRv :!Cv :!term]
                  [:!Tz :!Cz :!term]
                  [:!Ty :!Cy :!term]
                  [:!Wx :!Cx :!term]
                  [:!Wa :!Ca :!term]
                  [:!Wc :!Cc :!term]
                  [:!Wv :!Cv :!term]
                  [:!Wz :!Cz :!term]
                  [:!Wy :!Cy :!term]]}
         {:des "Window and tab control"
          :rules [[:!T#SRn :!Cn :general]
                  [:!T#SRt :!Ct :general]
                  [:!Tw :!Cw :general]
                  [:!W#SRn :!Cn :general]
                  [:!W#SRt :!Ct :general]
                  [:!Ww :!Cw :general]]}
         {:des "Alt tab"
          :rules [[:!O#SRtab :!Ctab]
                  [:!E#SRtab :!Ctab]]}
         {:des "Ctrl + Enter"
          :rules [[:!Treturn_or_enter :!Creturn_or_enter]
                  [:!Wreturn_or_enter :!Creturn_or_enter]]}
         {:des "Slack shortcuts"
          :rules [[:!Tk :!Ck :slack]
                  [:!Tcomma :!Ccomma :slack]]}]}
